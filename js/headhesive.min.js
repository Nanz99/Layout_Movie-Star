!function(e,i){"use strict";function t(t,s){"querySelector"in i&&"addEventListener"in e&&(this.visible=!1,this.options={offset:300,classes:{clone:"headhesive",stick:"headhesive--stick",unstick:"headhesive--unstick"},throttle:250,onInit:function(){},onStick:function(){},onUnstick:function(){},onDestroy:function(){}},this.elem="string"==typeof t?i.querySelector(t):t,this.options=o(this.options,s),this.init())}var o=function(t,s){for(var e in s)s.hasOwnProperty(e)&&(t[e]="object"==typeof s[e]?o(t[e],s[e]):s[e]);return t};t.prototype={constructor:t,init:function(){if(this.clonedElem=this.elem.cloneNode(!0),this.clonedElem.className+=" "+this.options.classes.clone,i.body.insertBefore(this.clonedElem,i.body.firstChild),"number"==typeof this.options.offset)this.scrollOffset=this.options.offset;else{if("string"!=typeof this.options.offset)throw new Error("Invalid offset: "+this.options.offset);this.scrollOffset=function(t){for(var s=0;t;)s+=t.offsetTop,t=t.offsetParent;return s}(i.querySelector(this.options.offset))}this._throttleUpdate=function(e,i){function o(){f=h(),r=null,c=e.apply(n,l),n=l=null}var n,l,c,h=Date.now||function(){return(new Date).getTime()},r=null,f=0;return function(){var t=h(),s=i-(t-f);return n=this,l=arguments,s<=0?(clearTimeout(r),r=null,f=t,c=e.apply(n,l),n=l=null):r=r||setTimeout(o,s),c}}(this.update.bind(this),this.options.throttle),e.addEventListener("scroll",this._throttleUpdate,!1),this.options.onInit.call(this)},destroy:function(){i.body.removeChild(this.clonedElem),e.removeEventListener("scroll",this._throttleUpdate),this.options.onDestroy.call(this)},stick:function(){this.visible||(this.clonedElem.className=this.clonedElem.className.replace(new RegExp("(^|\\s)*"+this.options.classes.unstick+"(\\s|$)*","g"),""),this.clonedElem.className+=" "+this.options.classes.stick,this.visible=!0,this.options.onStick.call(this))},unstick:function(){this.visible&&(this.clonedElem.className=this.clonedElem.className.replace(new RegExp("(^|\\s)*"+this.options.classes.stick+"(\\s|$)*","g"),""),this.clonedElem.className+=" "+this.options.classes.unstick,this.visible=!1,this.options.onUnstick.call(this))},update:function(){(void 0!==e.pageYOffset?e.pageYOffset:(i.documentElement||i.body.parentNode||i.body).scrollTop)>this.scrollOffset?this.stick():this.unstick()}},e.Headhesive=t}(window,document);